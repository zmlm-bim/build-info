(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e3502e6e"],{"0c79":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("Card",[e("Row",{staticClass:"operation",attrs:{align:"middle"}},[e("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v("添加子节点")]),e("Button",{attrs:{icon:"md-add"},on:{click:t.addRoot}},[t._v("添加一级节点")]),e("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),e("Button",{attrs:{icon:"md-refresh"},on:{click:t.getParentList}},[t._v("刷新")]),e("i-switch",{staticStyle:{"margin-left":"5px"},attrs:{size:"large"},model:{value:t.strict,callback:function(e){t.strict=e},expression:"strict"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("级联")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("单选")])])],1),e("Row",{attrs:{type:"flex",justify:"start",gutter:16}},[e("Col",{attrs:{sm:8,md:8,lg:8,xl:6}},[e("Alert",{attrs:{"show-icon":""}},[t._v(" 当前选择编辑： "),e("span",{staticClass:"select-title"},[t._v(t._s(t.editTitle))]),t.form.id?e("a",{staticClass:"select-clear",on:{click:t.cancelEdit}},[t._v("取消选择")]):t._e()]),e("Input",{attrs:{suffix:"ios-search",placeholder:"输入节点名搜索",clearable:""},on:{"on-change":t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),e("div",{staticClass:"custom-tree-bar",style:{maxHeight:t.maxHeight}},[e("Tree",{ref:"tree",attrs:{data:t.data,render:t.renderContent,"load-data":t.loadData,"show-checkbox":"","check-strictly":!t.strict},on:{"on-select-change":t.selectTree,"on-check-change":t.changeSelect}})],1),t.loading?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),e("Col",{attrs:{sm:16,md:16,lg:16,xl:9}},[e("Form",{ref:"form",attrs:{model:t.form,"label-width":100,rules:t.formValidate}},[e("FormItem",{staticClass:"form-noheight",attrs:{label:"上级节点",prop:"parentTitle"}},[e("div",{staticStyle:{display:"flex"}},[e("Input",{staticStyle:{"margin-right":"10px"},attrs:{readonly:""},model:{value:t.form.parentTitle,callback:function(e){t.$set(t.form,"parentTitle",e)},expression:"form.parentTitle"}}),e("Poptip",{attrs:{transfer:"",trigger:"click",placement:"right-start",title:"选择上级节点",width:"250"}},[e("Button",{attrs:{icon:"md-list"}},[t._v("选择分类")]),e("div",{staticClass:"tree-bar tree-select",attrs:{slot:"content"},slot:"content"},[e("Tree",{attrs:{data:t.dataEdit,"load-data":t.loadData},on:{"on-select-change":t.selectTreeEdit}}),t.loadingEdit?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1)]),e("FormItem",{attrs:{label:"节点名称",prop:"title"}},[e("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[e("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[e("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.form.sortOrder,callback:function(e){t.$set(t.form,"sortOrder",e)},expression:"form.sortOrder"}})],1)],1),e("FormItem",{attrs:{label:"是否启用",prop:"status"}},[e("i-switch",{attrs:{size:"large","true-value":0,"false-value":-1},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1),e("FormItem",{staticClass:"br"},[e("Button",{attrs:{loading:t.submitLoading,type:"primary"},on:{click:t.submitEdit}},[t._v("修改并保存")]),e("Button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)],1)],1),e("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[e("Form",{ref:"formAdd",attrs:{model:t.formAdd,"label-width":100,rules:t.formValidate}},[t.showParent?e("div",[e("FormItem",{attrs:{label:"上级节点："}},[t._v(t._s(t.form.title))])],1):t._e(),e("FormItem",{attrs:{label:"节点名称",prop:"title"}},[e("Input",{model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1),e("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[e("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[e("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.formAdd.sortOrder,callback:function(e){t.$set(t.formAdd,"sortOrder",e)},expression:"formAdd.sortOrder"}})],1)],1),e("FormItem",{attrs:{label:"是否启用",prop:"status"}},[e("i-switch",{attrs:{size:"large","true-value":0,"false-value":-1},model:{value:t.formAdd.status,callback:function(e){t.$set(t.formAdd,"status",e)},expression:"formAdd.status"}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text"},on:{click:t.cancelAdd}},[t._v("取消")]),e("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitAdd}},[t._v("提交")])],1)],1)],1)},a=[],r={name:"custom-tree",data(){return{loading:!1,maxHeight:"500px",strict:!0,loadingEdit:!1,modalVisible:!1,selectList:[],showParent:!1,modalTitle:"",editTitle:"",searchKey:"",form:{id:"",parentId:"",parentTitle:"",sortOrder:0,status:0},formAdd:{},formValidate:{title:[{required:!0,message:"名称不能为空",trigger:"blur"}],sortOrder:[{required:!0,type:"number",message:"排序值不能为空",trigger:"blur"}]},submitLoading:!1,data:[],dataEdit:[]}},methods:{init(){this.getParentList(),this.getParentListEdit()},renderContent(t,{root:e,node:i,data:a}){return"1"==a.type?t("span",[t("span",[t("Icon",{props:{type:a.icon,size:"16",color:a.color},style:{"margin-right":"8px","margin-bottom":"3px"}}),t("span",a.title)])]):"2"==a.type?t("span",[t("span",[t("img",{attrs:{src:s("cfa8"),alt:"..."},style:{width:"17px",height:"17px","margin-right":"5px"}}),t("span",a.title)])]):"3"==a.type?t("span",[t("span",[t("Avatar",{props:{size:"small"},style:{background:a.color,"margin-right":"5px"}},a.word),t("span",a.title)])]):t("span",t("span",a.title))},getParentList(){this.data=[{title:"自定义图标",id:"1",type:"1",icon:"logo-apple",color:"",parentId:"0",parentTitle:"一级节点",status:0,loading:!1,children:[{title:"带颜色的自定义图标",id:"2",type:"1",icon:"logo-android",color:"#97c03d",parentId:"1",status:0,parentTitle:"自定义图标"}]},{title:"自定义图片",id:"3",type:"2",parentId:"0",parentTitle:"一级节点",status:0},{title:"自定义iView组件",id:"4",type:"3",word:"E",color:"orange",parentId:"0",parentTitle:"一级节点",status:-1,loading:!1,children:[{title:"自定义iView组件",id:"5",type:"3",word:"字",color:"#c601c6",parentId:"1",status:0,parentTitle:"自定义iView组件"}]}]},getParentListEdit(){this.dataEdit=[{title:"自定义图标",id:"1",type:"1",icon:"logo-apple",color:"",parentId:"0",parentTitle:"一级节点",status:0,loading:!1,children:[{title:"带颜色的自定义图标",id:"2",type:"1",icon:"logo-android",color:"#97c03d",parentId:"1",status:0,parentTitle:"自定义图标"}]},{title:"自定义图片",id:"4",type:"2",parentId:"0",parentTitle:"一级节点",status:0},{title:"自定义iView组件",id:"5",type:"3",word:"E",color:"orange",parentId:"0",parentTitle:"一级节点",status:-1,loading:!1,children:[{title:"自定义iView组件",id:"6",type:"3",word:"字",color:"#c601c6",parentId:"1",status:0,parentTitle:"自定义iView组件"}]}]},loadData(t,e){},search(){this.searchKey?this.data=[{title:"这里需要请求后端接口",id:"1",parentId:"0",parentTitle:"一级节点",status:0},{title:"所以这里是假数据",id:"4",parentId:"0",parentTitle:"一级节点",status:0},{title:"我是被禁用的节点",id:"5",parentId:"0",parentTitle:"一级节点",status:-1}]:this.getParentList()},selectTree(t){if(t.length>0){this.$refs.form.resetFields();for(let i in t[0])null==t[0][i]&&(t[0][i]="");let e=JSON.stringify(t[0]),s=JSON.parse(e);this.form=s,this.editTitle=s.title}else this.cancelEdit()},cancelEdit(){let t=this.$refs.tree.getSelectedNodes()[0];t&&(t.selected=!1),this.$refs.form.resetFields(),this.form.id="",this.editTitle=""},selectTreeEdit(t){if(t.length>0){for(let i in t[0])null==t[0][i]&&(t[0][i]="");let e=JSON.stringify(t[0]),s=JSON.parse(e);this.form.parentId=s.id,this.form.parentTitle=s.title}},cancelAdd(){this.modalVisible=!1},handleReset(){this.$refs.form.resetFields(),this.form.status=0},submitEdit(){this.$refs.form.validate(t=>{if(t){if(!this.form.id)return void this.$Message.warning("请先点击选择要修改的节点");this.submitLoading=!0,this.submitLoading=!1,this.$Message.success("编辑成功"),this.modalVisible=!1}})},submitAdd(){this.$refs.formAdd.validate(t=>{t&&(this.submitLoading=!0,this.submitLoading=!1,this.$Message.success("添加成功"),this.modalVisible=!1)})},add(){this.form.id?(this.modalTitle="添加子节点",this.showParent=!0,this.formAdd={parentId:this.form.id,sortOrder:0,status:0},this.modalVisible=!0):this.$Message.warning("请先点击选择一个节点")},addRoot(){this.modalTitle="添加一级节点",this.showParent=!1,this.formAdd={parentId:0,sortOrder:0,status:0},this.modalVisible=!0},changeSelect(t){this.selectList=t},delAll(){this.selectList.length<=0?this.$Message.warning("您还未勾选要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectList.length+" 条数据及其下级所有数据?",loading:!0,onOk:()=>{let t="";this.selectList.forEach((function(e){t+=e.id+","})),t=t.substring(0,t.length-1),this.$Modal.remove(),this.$Message.success("删除成功"),this.selectList=[],this.cancelEdit()}})}},mounted(){let t=document.documentElement.clientHeight;this.maxHeight=Number(t-287)+"px",this.init()}},l=r,o=(s("6150"),s("2877")),n=Object(o["a"])(l,i,a,!1,null,null,null);e["default"]=n.exports},6150:function(t,e,s){"use strict";s("a31e")},a31e:function(t,e,s){},cfa8:function(t,e){t.exports="data:image/png;base64,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"}}]);